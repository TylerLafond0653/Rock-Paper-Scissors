<!DOCTYPE html>
<html lang="en">
<head>
    <title>RPS-1 System</title>
    <style>
        /* CORE LAYOUT */
        body { 
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; 
            background-color: #050505; 
            background-image: 
                linear-gradient(rgba(0, 255, 204, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 204, 0.05) 1px, transparent 1px);
            background-size: 30px 30px; /* Grid Pattern */
            color: white; 
            text-align: center; 
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            height: 100vh; margin: 0;
        }

        h1 { 
            font-size: 4em; color: #fff; 
            text-transform: uppercase; letter-spacing: 5px;
            margin-bottom: 5px;
            text-shadow: 4px 4px 0px #00ffcc;
        }

        h3 { 
            color: #00ffcc; font-weight: 400; 
            margin-bottom: 40px; letter-spacing: 2px;
            text-transform: uppercase;
        }
        
        .config-box {
            background: #000;
            border: 2px solid #00ffcc;
            padding: 40px;
            width: 400px;
            box-shadow: 
                0 0 20px rgba(0, 255, 204, 0.2),
                inset 0 0 20px rgba(0, 255, 204, 0.1);
            text-align: left;
            position: relative;
        }

        .config-box::before { content: ""; position: absolute; top: -5px; left: -5px; width: 20px; height: 20px; border-top: 4px solid white; border-left: 4px solid white; }
        .config-box::after { content: ""; position: absolute; bottom: -5px; right: -5px; width: 20px; height: 20px; border-bottom: 4px solid white; border-right: 4px solid white; }

        label { display: block; margin-bottom: 8px; color: #00ffcc; font-size: 0.9em; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; }

        input, select { 
            background: #111; border: 1px solid #333; color: white; 
            padding: 15px; width: 100%; box-sizing: border-box; 
            margin-bottom: 25px; font-size: 1.1em; outline: none; transition: 0.3s;
        }

        input:focus, select:focus { border-color: #00ffcc; background: #0a0a0a; box-shadow: 0 0 10px rgba(0, 255, 204, 0.3); }

        .btn-group { display: flex; gap: 15px; margin-top: 10px; }
        
        .btn {
            flex: 1; padding: 15px 0; font-size: 1.1em; color: black; background: #00ffcc;
            text-decoration: none; border: none; cursor: pointer; 
            font-weight: 800; text-transform: uppercase; letter-spacing: 1px;
            transition: 0.2s;
            clip-path: polygon(10px 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%, 0 10px);
        }
        
        .btn:hover { transform: translateY(-3px); box-shadow: 0 5px 20px rgba(0, 255, 204, 0.5); background: white; }
        .btn-multi { background: #ff0055; color: white; }
        .btn-multi:hover { box-shadow: 0 5px 20px rgba(255, 0, 85, 0.5); background: white; color: #ff0055; }

    </style>
</head>
<body>
    <h1>THE GUESSER</h1>
    <h3>RPS-1 Tournament Edition</h3>
    
    <div class="config-box">
        <label>Operator Identity (P1)</label>
        <input type="text" id="p1Name" value="PLAYER 1" style="border-left: 5px solid #00ffcc;">

        <label>Opponent Identity (P2/AI)</label>
        <input type="text" id="p2Name" value="PLAYER 2" style="border-left: 5px solid #ff0055;">

        <label>Camera Source</label>
        <select id="cameraIndex">
            <option value="0">Default (Integrated Webcam)</option>
            <option value="1">External USB (Cam 1)</option>
            <option value="2">External USB (Cam 2)</option>
        </select>

        <label>Victory Condition</label>
        <select id="winLimit">
            <option value="1">Sudden Death (1 Win)</option>
            <option value="2">Best of 3 (First to 2)</option>
            <option value="3" selected>Best of 5 (First to 3)</option>
            <option value="5">Best of 9 (First to 5)</option>
        </select>

        <div class="btn-group">
            <button onclick="startGame('single')" class="btn">VS AI</button>
            <button onclick="startGame('multi')" class="btn btn-multi">VS HUMAN</button>
        </div>
    </div>

    <script>
        async function startGame(mode) {
            const p1 = document.getElementById('p1Name').value;
            const p2 = document.getElementById('p2Name').value;
            const limit = document.getElementById('winLimit').value;
            const cam = document.getElementById('cameraIndex').value;

            // Send camera index to Python
            await fetch(`/action/setup_game?p1=${p1}&p2=${p2}&limit=${limit}&cam=${cam}`);

            // Redirect to game
            window.location.href = `/play/${mode}`;
        }
    </script>
</body>
</html>